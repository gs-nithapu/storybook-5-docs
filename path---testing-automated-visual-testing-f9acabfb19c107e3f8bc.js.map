{"version":3,"sources":["webpack:///path---testing-automated-visual-testing-f9acabfb19c107e3f8bc.js","webpack:///./.cache/json/testing-automated-visual-testing.json"],"names":["webpackJsonp","959","module","exports","data","site","siteMetadata","docSections","basics","guides","configurations","formats","testing","addons","presets","allMarkdownRemark","edges","node","fields","slug","frontmatter","title","id","markdownRemark","html","pathContext"],"mappings":"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","file":"path---testing-automated-visual-testing-f9acabfb19c107e3f8bc.js","sourcesContent":["webpackJsonp([36869246150532],{\n\n/***/ 959:\n/***/ (function(module, exports) {\n\n\tmodule.exports = {\"data\":{\"site\":{\"siteMetadata\":{\"docSections\":{\"basics\":[\"/basics/introduction/\",\"/basics/writing-stories/\",\"/basics/exporting-storybook/\",\"/basics/faq/\",\"/basics/live-examples/\"],\"guides\":[\"/guides/quick-start-guide/\",\"/guides/slow-start-guide/\",\"/guides/guide-html/\",\"/guides/guide-react/\",\"/guides/guide-react-native/\",\"/guides/guide-vue/\",\"/guides/guide-angular/\",\"/guides/guide-mithril/\",\"/guides/guide-marko/\",\"/guides/guide-ember/\",\"/guides/guide-riot/\",\"/guides/guide-svelte/\",\"/guides/guide-preact/\"],\"configurations\":[\"/configurations/overview/\",\"/configurations/options-parameter/\",\"/configurations/default-config/\",\"/configurations/custom-webpack-config/\",\"/configurations/custom-babel-config/\",\"/configurations/typescript-config/\",\"/configurations/add-custom-head-tags/\",\"/configurations/add-custom-body/\",\"/configurations/serving-static-files/\",\"/configurations/env-vars/\",\"/configurations/theming/\",\"/configurations/cli-options/\",\"/configurations/standalone-options/\"],\"formats\":[\"/formats/component-story-format/\",\"/formats/storiesof-api/\",\"/formats/mdx-syntax/\"],\"testing\":[\"/testing/react-ui-testing/\",\"/testing/structural-testing/\",\"/testing/interaction-testing/\",\"/testing/automated-visual-testing/\",\"/testing/manual-testing/\"],\"addons\":[\"/addons/introduction/\",\"/addons/using-addons/\",\"/addons/writing-addons/\",\"/addons/api/\"],\"presets\":[\"/presets/introduction/\",\"/presets/preset-gallery/\",\"/presets/writing-presets/\"]}}},\"allMarkdownRemark\":{\"edges\":[{\"node\":{\"fields\":{\"slug\":\"/404/\"},\"frontmatter\":{\"title\":\"\",\"id\":null}}},{\"node\":{\"fields\":{\"slug\":\"/basics/community/\"},\"frontmatter\":{\"title\":\"Community\",\"id\":\"community\"}}},{\"node\":{\"fields\":{\"slug\":\"/basics/introduction/\"},\"frontmatter\":{\"title\":\"Introduction\",\"id\":\"introduction\"}}},{\"node\":{\"fields\":{\"slug\":\"/addons/introduction/\"},\"frontmatter\":{\"title\":\"Intro to Addons\",\"id\":\"introduction\"}}},{\"node\":{\"fields\":{\"slug\":\"/addons/using-addons/\"},\"frontmatter\":{\"title\":\"Using Addons\",\"id\":\"using-addons\"}}},{\"node\":{\"fields\":{\"slug\":\"/basics/faq/\"},\"frontmatter\":{\"title\":\"Frequently Asked Questions\",\"id\":\"faq\"}}},{\"node\":{\"fields\":{\"slug\":\"/basics/toolbar-guide/\"},\"frontmatter\":{\"title\":\"Toolbar\",\"id\":\"toolbar-guide\"}}},{\"node\":{\"fields\":{\"slug\":\"/basics/live-examples/\"},\"frontmatter\":{\"title\":\"Live Examples\",\"id\":\"live-examples\"}}},{\"node\":{\"fields\":{\"slug\":\"/basics/exporting-storybook/\"},\"frontmatter\":{\"title\":\"Exporting Storybook as a Static App\",\"id\":\"exporting-storybook\"}}},{\"node\":{\"fields\":{\"slug\":\"/configurations/add-custom-head-tags/\"},\"frontmatter\":{\"title\":\"Add Custom Head Tags\",\"id\":\"add-custom-head-tags\"}}},{\"node\":{\"fields\":{\"slug\":\"/configurations/add-custom-body/\"},\"frontmatter\":{\"title\":\"Add Custom Body\",\"id\":\"add-custom-body\"}}},{\"node\":{\"fields\":{\"slug\":\"/configurations/custom-babel-config/\"},\"frontmatter\":{\"title\":\"Custom Babel Config\",\"id\":\"custom-babel-config\"}}},{\"node\":{\"fields\":{\"slug\":\"/configurations/custom-postcss-config/\"},\"frontmatter\":{\"title\":\"Custom Postcss Config\",\"id\":\"custom-postcss-config\"}}},{\"node\":{\"fields\":{\"slug\":\"/configurations/cli-options/\"},\"frontmatter\":{\"title\":\"CLI Options\",\"id\":\"cli-options\"}}},{\"node\":{\"fields\":{\"slug\":\"/configurations/default-config/\"},\"frontmatter\":{\"title\":\"Default Config\",\"id\":\"default-config\"}}},{\"node\":{\"fields\":{\"slug\":\"/configurations/serving-static-files/\"},\"frontmatter\":{\"title\":\"Serving Static Files\",\"id\":\"serving-static-files\"}}},{\"node\":{\"fields\":{\"slug\":\"/configurations/env-vars/\"},\"frontmatter\":{\"title\":\"Using Environment Variables\",\"id\":\"env-vars\"}}},{\"node\":{\"fields\":{\"slug\":\"/configurations/overview/\"},\"frontmatter\":{\"title\":\"Configuration overview\",\"id\":\"overview\"}}},{\"node\":{\"fields\":{\"slug\":\"/configurations/standalone-options/\"},\"frontmatter\":{\"title\":\"Standalone Options\",\"id\":\"standalone-options\"}}},{\"node\":{\"fields\":{\"slug\":\"/configurations/theming/\"},\"frontmatter\":{\"title\":\"Theming Storybook\",\"id\":\"theming\"}}},{\"node\":{\"fields\":{\"slug\":\"/presets/introduction/\"},\"frontmatter\":{\"title\":\"Intro to Presets\",\"id\":\"introduction\"}}},{\"node\":{\"fields\":{\"slug\":\"/configurations/options-parameter/\"},\"frontmatter\":{\"title\":\"Options Parameter\",\"id\":\"options-parameter\"}}},{\"node\":{\"fields\":{\"slug\":\"/presets/preset-gallery/\"},\"frontmatter\":{\"title\":\"Preset Gallery\",\"id\":\"preset-gallery\"}}},{\"node\":{\"fields\":{\"slug\":\"/presets/writing-presets/\"},\"frontmatter\":{\"title\":\"Writing Presets\",\"id\":\"writing-presets\"}}},{\"node\":{\"fields\":{\"slug\":\"/formats/mdx-syntax/\"},\"frontmatter\":{\"title\":\"MDX Syntax\",\"id\":\"mdx-syntax\"}}},{\"node\":{\"fields\":{\"slug\":\"/formats/component-story-format/\"},\"frontmatter\":{\"title\":\"Component Story Format (CSF)\",\"id\":\"component-story-format\"}}},{\"node\":{\"fields\":{\"slug\":\"/guides/guide-ember/\"},\"frontmatter\":{\"title\":\"Storybook for Ember\",\"id\":\"guide-ember\"}}},{\"node\":{\"fields\":{\"slug\":\"/guides/guide-angular/\"},\"frontmatter\":{\"title\":\"Storybook for Angular\",\"id\":\"guide-angular\"}}},{\"node\":{\"fields\":{\"slug\":\"/guides/guide-html/\"},\"frontmatter\":{\"title\":\"Storybook for HTML\",\"id\":\"guide-html\"}}},{\"node\":{\"fields\":{\"slug\":\"/guides/guide-mithril/\"},\"frontmatter\":{\"title\":\"Storybook for Mithril\",\"id\":\"guide-mithril\"}}},{\"node\":{\"fields\":{\"slug\":\"/formats/storiesof-api/\"},\"frontmatter\":{\"title\":\"StoriesOf API\",\"id\":\"storiesof-api\"}}},{\"node\":{\"fields\":{\"slug\":\"/guides/guide-rax/\"},\"frontmatter\":{\"title\":\"Storybook for Rax\",\"id\":\"guide-rax\"}}},{\"node\":{\"fields\":{\"slug\":\"/guides/guide-marko/\"},\"frontmatter\":{\"title\":\"Storybook for Marko\",\"id\":\"guide-marko\"}}},{\"node\":{\"fields\":{\"slug\":\"/guides/guide-preact/\"},\"frontmatter\":{\"title\":\"Storybook for Preact\",\"id\":\"guide-preact\"}}},{\"node\":{\"fields\":{\"slug\":\"/guides/guide-react/\"},\"frontmatter\":{\"title\":\"Storybook for React\",\"id\":\"guide-react\"}}},{\"node\":{\"fields\":{\"slug\":\"/guides/guide-svelte/\"},\"frontmatter\":{\"title\":\"Storybook for Svelte\",\"id\":\"guide-svelte\"}}},{\"node\":{\"fields\":{\"slug\":\"/guides/guide-react-native/\"},\"frontmatter\":{\"title\":\"Storybook for React Native\",\"id\":\"guide-react-native\"}}},{\"node\":{\"fields\":{\"slug\":\"/guides/guide-riot/\"},\"frontmatter\":{\"title\":\"Storybook for Riot\",\"id\":\"guide-riot\"}}},{\"node\":{\"fields\":{\"slug\":\"/guides/guide-vue/\"},\"frontmatter\":{\"title\":\"Storybook for Vue\",\"id\":\"guide-vue\"}}},{\"node\":{\"fields\":{\"slug\":\"/guides/quick-start-guide/\"},\"frontmatter\":{\"title\":\"Quick Start Guide\",\"id\":\"quick-start-guide\"}}},{\"node\":{\"fields\":{\"slug\":\"/guides/slow-start-guide/\"},\"frontmatter\":{\"title\":\"Slow Start Guide\",\"id\":\"slow-start-guide\"}}},{\"node\":{\"fields\":{\"slug\":\"/testing/react-ui-testing/\"},\"frontmatter\":{\"title\":\"Introduction: React UI Testing\",\"id\":\"react-ui-testing\"}}},{\"node\":{\"fields\":{\"slug\":\"/testing/interaction-testing/\"},\"frontmatter\":{\"title\":\"Interaction Testing\",\"id\":\"interaction-testing\"}}},{\"node\":{\"fields\":{\"slug\":\"/testing/structural-testing/\"},\"frontmatter\":{\"title\":\"Structural Testing\",\"id\":\"structural-testing\"}}},{\"node\":{\"fields\":{\"slug\":\"/testing/manual-testing/\"},\"frontmatter\":{\"title\":\"Manual Testing\",\"id\":\"manual-testing\"}}},{\"node\":{\"fields\":{\"slug\":\"/addons/api/\"},\"frontmatter\":{\"title\":\"API\",\"id\":\"api\"}}},{\"node\":{\"fields\":{\"slug\":\"/addons/addon-gallery/\"},\"frontmatter\":{\"title\":\"Addon Gallery\",\"id\":\"addon-gallery\"}}},{\"node\":{\"fields\":{\"slug\":\"/addons/writing-addons/\"},\"frontmatter\":{\"title\":\"Writing Addons\",\"id\":\"writing-addons\"}}},{\"node\":{\"fields\":{\"slug\":\"/basics/writing-stories/\"},\"frontmatter\":{\"title\":\"Writing Stories\",\"id\":\"writing-stories\"}}},{\"node\":{\"fields\":{\"slug\":\"/configurations/custom-webpack-config/\"},\"frontmatter\":{\"title\":\"Custom Webpack Config\",\"id\":\"custom-webpack-config\"}}},{\"node\":{\"fields\":{\"slug\":\"/configurations/typescript-config/\"},\"frontmatter\":{\"title\":\"TypeScript Config\",\"id\":\"typescript-config\"}}},{\"node\":{\"fields\":{\"slug\":\"/testing/automated-visual-testing/\"},\"frontmatter\":{\"title\":\"Automated Visual Testing\",\"id\":\"automated-visual-testing\"}}}]},\"markdownRemark\":{\"html\":\"<p>Automated Visual Testing is a quality assurance process meant to automatically verify that a UI visually appears as intended. There are many alternative names for this process, such as Visual Regression Testing, Visual Validation Testing, Visual UI Testing, or Visual Testing, but in all cases we’re talking about confirming the thing your users will see—the actual pixels—without caring about how it’s generated.</p>\\n<h2 id=\\\"benefits\\\"><a href=\\\"#benefits\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>Benefits</h2>\\n<p>The largest benefit to Automated Visual Testing is that they can often supersede other, more brittle tests. Instead of asserting specific CSS rules, selectors, and HTML markup, you assert that something visually appears as expected. If you refactor style, markup, or state logic, but visually nothing changes, you wouldn’t need to modify any tests or update visual baselines! In a majority of cases, what a user <em>sees</em> is what you really care about, not how it was achieved.</p>\\n<p>Another potential benefit is with cross-browser testing. If you perform your visual tests against multiple browsers, they can potentially catch regressions a developer didn’t because it appeared correct in their preferred development browser.</p>\\n<h2 id=\\\"challenges\\\"><a href=\\\"#challenges\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>Challenges</h2>\\n<p>The biggest challenge with Automated Visual Testing is that humans and machines perceive pixels differently. Two screenshots of a UI could appear entirely identical to a human but 100% different to a 1:1, naive diffing algorithm.</p>\\n<p>For example, changes in <a href=\\\"https://en.wikipedia.org/wiki/Spatial_anti-aliasing\\\">anti-aliasing</a> are common, even if human eyes don’t notice them.</p>\\n<p>\\n  <a\\n    class=\\\"gatsby-resp-image-link\\\"\\n    href=\\\"/static/image-diff-1-4684ffd6fa1c7419af7aa1c570722fb2-6fae4.png\\\"\\n    style=\\\"display: block\\\"\\n    target=\\\"_blank\\\"\\n    rel=\\\"noopener\\\"\\n  >\\n  \\n  <span\\n    class=\\\"gatsby-resp-image-wrapper\\\"\\n    style=\\\"position: relative; display: block; ; max-width: 690px; margin-left: auto; margin-right: auto;\\\"\\n  >\\n    <span\\n      class=\\\"gatsby-resp-image-background-image\\\"\\n      style=\\\"padding-bottom: 11.249999999999998%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAACCAIAAADXZGvcAAAACXBIWXMAAAsSAAALEgHS3X78AAAAa0lEQVQI12O4cPna5u27Zi5d07l4y8r1mzbv2H3/4aN9h45u3r5z2pqdM1Zv37Jtx66DR76+evPhxp2312+f2L7vxdWbH67f/vroKcN/MPj7+9ffX9//o4J/v3/9+/0TReTfvy/fvwFJCBcAX6BpqkkgvCYAAAAASUVORK5CYII='); background-size: cover; display: block;\\\"\\n    >\\n      <img\\n        class=\\\"gatsby-resp-image-image\\\"\\n        style=\\\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\\\"\\n        alt=\\\"Menu before and after differences\\\"\\n        title=\\\"\\\"\\n        src=\\\"/static/image-diff-1-4684ffd6fa1c7419af7aa1c570722fb2-44d6a.png\\\"\\n        srcset=\\\"/static/image-diff-1-4684ffd6fa1c7419af7aa1c570722fb2-f4799.png 173w,\\n/static/image-diff-1-4684ffd6fa1c7419af7aa1c570722fb2-b3b1d.png 345w,\\n/static/image-diff-1-4684ffd6fa1c7419af7aa1c570722fb2-44d6a.png 690w,\\n/static/image-diff-1-4684ffd6fa1c7419af7aa1c570722fb2-bc0f7.png 1035w,\\n/static/image-diff-1-4684ffd6fa1c7419af7aa1c570722fb2-b50e5.png 1380w,\\n/static/image-diff-1-4684ffd6fa1c7419af7aa1c570722fb2-6fae4.png 2000w\\\"\\n        sizes=\\\"(max-width: 690px) 100vw, 690px\\\"\\n      />\\n    </span>\\n  </span>\\n  \\n  </a>\\n    \\n\\n  <a\\n    class=\\\"gatsby-resp-image-link\\\"\\n    href=\\\"/static/image-diff-2-4aeae5c5035e9380b6ac4383a314fac5-6fae4.png\\\"\\n    style=\\\"display: block\\\"\\n    target=\\\"_blank\\\"\\n    rel=\\\"noopener\\\"\\n  >\\n  \\n  <span\\n    class=\\\"gatsby-resp-image-wrapper\\\"\\n    style=\\\"position: relative; display: block; ; max-width: 690px; margin-left: auto; margin-right: auto;\\\"\\n  >\\n    <span\\n      class=\\\"gatsby-resp-image-background-image\\\"\\n      style=\\\"padding-bottom: 25.650000000000002%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAIAAADKYVtkAAAACXBIWXMAAAsSAAALEgHS3X78AAABPElEQVQY0wExAc7+AK/X8IrE6ZHH6o7G6pLI64rE6bTZ8ZnM7I7G6o7G6pDH6o/H6pPI6+P3/Ov+/+n6/un+/+r9/+j8//D7/wCSyetXq+BdruFjsuNXq+FZrOKPx+tzuuZTqt9ms+NYreBYquBouenWwdPdqrzbssTbmK3bpbjarcDn1eAAns/tc7nmgMDoe73ndLnmcLjll8zsgcHpdr3mgcLpcrnkcrjkecTu16/C4ZCj34qg3n6U34Wa3Iac573LAIbC6VCn31ms4Vqu5F6v40+m34zF6may41Wq4Far4Vyu41er4F2u4dTq9+Dw+93r993t+d7t+Nzq9ufx+QDt9vrq9//I1NyyvsbY5Ozn9Pzt9vvo9Prn9PzDz9fE0Nno9Pzn8vr5/P77/v/4+/zMz9H09/n7///7/v99UupMEkmVQQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\\\"\\n    >\\n      <img\\n        class=\\\"gatsby-resp-image-image\\\"\\n        style=\\\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\\\"\\n        alt=\\\"Close-up of menu before and after differences\\\"\\n        title=\\\"\\\"\\n        src=\\\"/static/image-diff-2-4aeae5c5035e9380b6ac4383a314fac5-44d6a.png\\\"\\n        srcset=\\\"/static/image-diff-2-4aeae5c5035e9380b6ac4383a314fac5-f4799.png 173w,\\n/static/image-diff-2-4aeae5c5035e9380b6ac4383a314fac5-b3b1d.png 345w,\\n/static/image-diff-2-4aeae5c5035e9380b6ac4383a314fac5-44d6a.png 690w,\\n/static/image-diff-2-4aeae5c5035e9380b6ac4383a314fac5-bc0f7.png 1035w,\\n/static/image-diff-2-4aeae5c5035e9380b6ac4383a314fac5-b50e5.png 1380w,\\n/static/image-diff-2-4aeae5c5035e9380b6ac4383a314fac5-6fae4.png 2000w\\\"\\n        sizes=\\\"(max-width: 690px) 100vw, 690px\\\"\\n      />\\n    </span>\\n  </span>\\n  \\n  </a>\\n    </p>\\n<p>Even though we didn’t change any CSS and the menus appear visually the same to our eyes, if we compare their pixels 1:1 we find that lots of it has changed! This can happen between browser versions, underlying hardware changes on your cloud platform, and more.</p>\\n<p>Similar situations happen all the time, such as how images, drop shadows, etc are rendered.</p>\\n<p>Some more robust libraries and services solve this by using a combination of <a href=\\\"https://wikipedia.org/wiki/Machine_learning\\\">Machine Learning</a> and <a href=\\\"https://wikipedia.org/wiki/Heuristic_(computer_science)\\\">heuristics</a>. The machine is trained what is and is not an acceptable variation.</p>\\n<p>For example, every graphics card renders text and images differently at the pixel level. Your machine will likely have a different graphics card than the testing server and the other developers. While the naked eye can’t tell the difference, a machine needs to be trained to “see” them like we do.</p>\\n<p>Another issue is that these tests are often slow compared to more lightweight unit tests that don’t require a full browser. So you might only run them when you commit, push, and/or on your Continuous Integration (CI) server.</p>\\n<h2 id=\\\"libraries-and-services-with-storybook-integration\\\"><a href=\\\"#libraries-and-services-with-storybook-integration\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>Libraries and Services with Storybook Integration</h2>\\n<p>There are many libraries and services that have Storybook integrations out-of-box, with varying levels of sophistication. Some even use complex Machine Learning instead of 1:1 pixel comparison.</p>\\n<p>Storybook uses <a href=\\\"https://www.chromaticqa.com\\\">Chromatic</a>, a visual testing service made by Storybook maintainers, to prevent UI bugs in our <a href=\\\"https://www.chromaticqa.com/library?appId=5a375b97f4b14f0020b0cda3\\\">application</a>, <a href=\\\"https://www.chromaticqa.com/library?appId=5ccbc373887ca40020446347\\\">design system</a>, and <a href=\\\"https://www.chromaticqa.com/library?appId=5be26744d2f6250024a9117d\\\">website</a>.</p>\\n<p>Here are some in alphabetical order:</p>\\n<ul>\\n<li><a href=\\\"https://applitools.com/storybook\\\">Applitools</a></li>\\n<li><a href=\\\"https://www.chromaticqa.com\\\">Chromatic</a> made by Storybook maintainers</li>\\n<li><a href=\\\"https://github.com/wKich/creevey\\\">Creevey</a></li>\\n<li><a href=\\\"https://happo.io\\\">Happo</a></li>\\n<li><a href=\\\"https://loki.js.org/\\\">Loki</a></li>\\n<li><a href=\\\"https://docs.percy.io/docs/storybook\\\">Percy</a></li>\\n<li><a href=\\\"https://screener.io/v2/docs\\\">Screener</a></li>\\n<li><a href=\\\"https://github.com/storybookjs/storybook/tree/master/addons/storyshots\\\">StoryShots</a> with its <a href=\\\"https://github.com/storybookjs/storybook/tree/master/addons/storyshots#configure-storyshots-for-image-snapshots\\\">seamless integration</a> with <a href=\\\"https://github.com/americanexpress/jest-image-snapshot\\\">jest-image-snapshot</a></li>\\n<li><a href=\\\"https://github.com/Visual-Regression-Tracker/Visual-Regression-Tracker/wiki/Storybook\\\">Visual Regression Tracker</a></li>\\n</ul>\\n<h2 id=\\\"custom-solutions\\\"><a href=\\\"#custom-solutions\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>Custom Solutions</h2>\\n<p>There are a number of popular libraries that don’t offer out-of-box integration with Storybook, but still can be used to visual test it. <a href=\\\"https://github.com/garris/BackstopJS\\\">BackstopJS</a> and <a href=\\\"https://github.com/gemini-testing/gemini\\\">Gemini</a>, for example, but there are quite a few!</p>\\n<p>Storybook’s web server supports the ability to render a component story standalone, in any particular state, without any of the Storybook layout elements. With these special URLs you can either create your own screenshots and diff them, or use a library which does that work for you.</p>\\n<p>Let’s take a look at an example, in this case using <a href=\\\"https://github.com/americanexpress/jest-image-snapshot\\\">jest-image-snapshot</a>—but the idea is similar for most of them.</p>\\n<blockquote>\\n<p>Most custom solutions, including jest-image-snapshot, do 1:1 pixel comparisons which may suffer from issues described in the <strong>Challenges</strong> section above.</p>\\n</blockquote>\\n<h3 id=\\\"example-using-puppeteer-and-jest\\\"><a href=\\\"#example-using-puppeteer-and-jest\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>Example using Puppeteer and Jest</h3>\\n<p>Here’s a sample Storybook we’d like to visually test:</p>\\n<p>\\n  <a\\n    class=\\\"gatsby-resp-image-link\\\"\\n    href=\\\"/static/storybook-screenshot-195bd35a34abbeda16ec0ced7ec653fb-1d34c.png\\\"\\n    style=\\\"display: block\\\"\\n    target=\\\"_blank\\\"\\n    rel=\\\"noopener\\\"\\n  >\\n  \\n  <span\\n    class=\\\"gatsby-resp-image-wrapper\\\"\\n    style=\\\"position: relative; display: block; ; max-width: 690px; margin-left: auto; margin-right: auto;\\\"\\n  >\\n    <span\\n      class=\\\"gatsby-resp-image-background-image\\\"\\n      style=\\\"padding-bottom: 62.447960033305584%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsSAAALEgHS3X78AAABqUlEQVQoz5WRy07CUBCGu3CnaIPxlrgwrttEFibwBqJRCUtW+gSGhSxaLiUEw4ZHIAEC7HgqSFgQgi2F3s7pOOdQQMGYepKvTMqZL/90hMu9qHh9Fc3Fb2/V++SDEk8klJtYTDk9v1Aih6JyEIL9yJF6fHKWwx5ReH58krLZN/ioVqFer0OtVuOo+TwoigqFQnFNvlBY1sWf70olDd5zObhLJmWh2+tJczyLxYLMZjPXsiyXUsp/CfFcAAgDQeY9dAntdlsaj8cOCsDzPN9xHA5e4IQ5eA+wx+50OrKAD2kwGDi6rgNKfQwLtm0zU1hWQocL+/2+NBwOndFoBCjzcXT2J7sDwd0/z46w1WpJ+O0clmpbuJL+K+FK6LouH5kJmZyDYkIpEEKWBDV+6+9wIfZuhIZh8IQoo4jPxOYnptV135sZvmfbPq49qC2f8lUETzxMiP3LpbAtm6bJE+I7arNm111vGSj9vd7AhZjU7na7stBoNKTJZELYqDg6h9VbYwXsjAssCAs5nU69ZrMpC6lUSqxUKhlN016Rl1CUy+u6vKxZbyadTotfTdkC8j6EogQAAAAASUVORK5CYII='); background-size: cover; display: block;\\\"\\n    >\\n      <img\\n        class=\\\"gatsby-resp-image-image\\\"\\n        style=\\\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\\\"\\n        alt=\\\"Storybook Screenshot\\\"\\n        title=\\\"\\\"\\n        src=\\\"/static/storybook-screenshot-195bd35a34abbeda16ec0ced7ec653fb-44d6a.png\\\"\\n        srcset=\\\"/static/storybook-screenshot-195bd35a34abbeda16ec0ced7ec653fb-f4799.png 173w,\\n/static/storybook-screenshot-195bd35a34abbeda16ec0ced7ec653fb-b3b1d.png 345w,\\n/static/storybook-screenshot-195bd35a34abbeda16ec0ced7ec653fb-44d6a.png 690w,\\n/static/storybook-screenshot-195bd35a34abbeda16ec0ced7ec653fb-bc0f7.png 1035w,\\n/static/storybook-screenshot-195bd35a34abbeda16ec0ced7ec653fb-b50e5.png 1380w,\\n/static/storybook-screenshot-195bd35a34abbeda16ec0ced7ec653fb-0ed32.png 2070w,\\n/static/storybook-screenshot-195bd35a34abbeda16ec0ced7ec653fb-1d34c.png 2402w\\\"\\n        sizes=\\\"(max-width: 690px) 100vw, 690px\\\"\\n      />\\n    </span>\\n  </span>\\n  \\n  </a>\\n    </p>\\n<p>The Storybook UI has a bunch of elements you wouldn’t want to include in your visual test. Besides being extraneous, your tests could incorrectly fail when you add a new, unrelated story or state because it would show up in the side menu.</p>\\n<p>Instead, we’ll want to render a component’s story by itself. Let’s assume the above Storybook runs on port 9009 and we can access it via <a href=\\\"http://localhost:9009/\\\">http://localhost:9009/</a>.</p>\\n<p>Now let’s pick a single story: the “with text” story of the Button.</p>\\n<p>The URL for that story contains a number of query parameters, but the first two are the most important: <a href=\\\"http://localhost:9009/?selectedKind=Button&#x26;selectedStory=with+text\\\">http://localhost:9009/?selectedKind=Button&#x26;selectedStory=with+text</a></p>\\n<ul>\\n<li>selectedKind=Button</li>\\n<li>selectedStory=with+text</li>\\n</ul>\\n<p>Using these two parameters we can generate the URL to render the story by itself. Instead of the URL’s path being the homepage/index we use <code>/iframe.html</code>:</p>\\n<p><a href=\\\"http://localhost:9009/iframe.html?selectedKind=Button&#x26;selectedStory=with+text\\\">http://localhost:9009/iframe.html?selectedKind=Button&#x26;selectedStory=with+text</a></p>\\n<p>\\n  <a\\n    class=\\\"gatsby-resp-image-link\\\"\\n    href=\\\"/static/storybook-iframe-screenshot-99ff80ac2a815448d16e87127887e1e7-1d34c.png\\\"\\n    style=\\\"display: block\\\"\\n    target=\\\"_blank\\\"\\n    rel=\\\"noopener\\\"\\n  >\\n  \\n  <span\\n    class=\\\"gatsby-resp-image-wrapper\\\"\\n    style=\\\"position: relative; display: block; ; max-width: 690px; margin-left: auto; margin-right: auto;\\\"\\n  >\\n    <span\\n      class=\\\"gatsby-resp-image-background-image\\\"\\n      style=\\\"padding-bottom: 62.447960033305584%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsSAAALEgHS3X78AAABKElEQVQoz82RvU6DUBTHGZwUK6kSHByMM0QdGnkDbQc1ISxO9g3sUptLA7WhkhAWXoEQPl+PjxZoj1xUxDjB5El+w/3fnF/OvYc42+tTF+f9KT8YSHe3Q3TD8+jy6hqd0Aw6IHuI7FGIPDyqwdn+X6RjmpnSzClFPN4/sJPJC7yvVmCaJhiGAbquw9tyCbKsgKIsQFaULxYgzecgST8gJFX562wGw9GII8IwZJMkidM0LQAg6wjujbGLcByHLYpiUwaw61i4N8uyte/7XCUsD00htORbuPE871OY53kthJbVFNYT/n9h4w+3HXay/bUU13XrLZeFL3ctqYSlYx0EAUdYlsXGcVzgycundwL3RlGU27bNEYIgUJqmPamqOi557sgYO0RRpD4ANtUKtCUb1X8AAAAASUVORK5CYII='); background-size: cover; display: block;\\\"\\n    >\\n      <img\\n        class=\\\"gatsby-resp-image-image\\\"\\n        style=\\\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\\\"\\n        alt=\\\"Storybook iframe Screenshot\\\"\\n        title=\\\"\\\"\\n        src=\\\"/static/storybook-iframe-screenshot-99ff80ac2a815448d16e87127887e1e7-44d6a.png\\\"\\n        srcset=\\\"/static/storybook-iframe-screenshot-99ff80ac2a815448d16e87127887e1e7-f4799.png 173w,\\n/static/storybook-iframe-screenshot-99ff80ac2a815448d16e87127887e1e7-b3b1d.png 345w,\\n/static/storybook-iframe-screenshot-99ff80ac2a815448d16e87127887e1e7-44d6a.png 690w,\\n/static/storybook-iframe-screenshot-99ff80ac2a815448d16e87127887e1e7-bc0f7.png 1035w,\\n/static/storybook-iframe-screenshot-99ff80ac2a815448d16e87127887e1e7-b50e5.png 1380w,\\n/static/storybook-iframe-screenshot-99ff80ac2a815448d16e87127887e1e7-0ed32.png 2070w,\\n/static/storybook-iframe-screenshot-99ff80ac2a815448d16e87127887e1e7-1d34c.png 2402w\\\"\\n        sizes=\\\"(max-width: 690px) 100vw, 690px\\\"\\n      />\\n    </span>\\n  </span>\\n  \\n  </a>\\n    </p>\\n<p>Now that we know how to render the story by itself, let’s get our testing environment all set up.</p>\\n<p>For this example, we’re going to use a number of packages:</p>\\n<ul>\\n<li>\\n<p><a href=\\\"https://jestjs.io/\\\">jest</a></p>\\n<ul>\\n<li>Testing framework by Facebook</li>\\n</ul>\\n</li>\\n<li>\\n<p><a href=\\\"https://developers.google.com/web/tools/puppeteer/\\\">puppeteer</a></p>\\n<ul>\\n<li>Library by Google for controlling a <a href=\\\"https://wikipedia.org/wiki/Headless_software\\\">headless</a> Chrome browser.</li>\\n</ul>\\n</li>\\n<li>\\n<p><a href=\\\"https://github.com/smooth-code/jest-puppeteer\\\">jest-puppeteer</a></p>\\n<ul>\\n<li>Integration between Jest and Puppeteer</li>\\n</ul>\\n</li>\\n<li>\\n<p><a href=\\\"https://github.com/americanexpress/jest-image-snapshot\\\">jest-image-snapshot</a></p>\\n<ul>\\n<li>Image snapshot assertion helper</li>\\n</ul>\\n</li>\\n<li>\\n<p><a href=\\\"https://github.com/bahmutov/start-server-and-test\\\">start-server-and-test</a></p>\\n<ul>\\n<li>Used to start/stop our Storybook server automatically for our tests</li>\\n</ul>\\n</li>\\n</ul>\\n<blockquote>\\n<p>Even though we’re choosing Jest/Puppeteer in this example, the principles are the same with other solutions.</p>\\n</blockquote>\\n<p>Let’s go ahead and add all of these:</p>\\n<pre><code class=\\\"language-sh\\\">yarn add jest puppeteer jest-puppeteer jest-image-snapshot start-server-and-test --dev\\n</code></pre>\\n<p>There’s a bit of setup code that needs to run before your tests, so we’ll need to configure a Jest setup file to run first, if you haven’t already. This is done with the <a href=\\\"https://jestjs.io/docs/en/configuration.html#setupFilesAfterEnv-string\\\"><code>setupFilesAfterEnv</code> config property</a>, either in your package.json or in your <code>jest.config.js</code>. We’ll also set <code>\\\"preset\\\": \\\"jest-puppeteer\\\"</code> so that we get the nice integration from jest-puppeteer.</p>\\n<h4 id=\\\"integrationjestconfigjs\\\"><a href=\\\"#integrationjestconfigjs\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a><code>integration/jest.config.js</code></h4>\\n<pre><code class=\\\"language-js\\\">module.exports = {\\n  preset: 'jest-puppeteer',\\n  testRegex: './*\\\\\\\\.test\\\\\\\\.js$',\\n  setupFilesAfterEnv: ['./setupTests.js']\\n};\\n</code></pre>\\n<p>With our configuration in place, we can create our file at <code>integration/setupTests.js</code> and add the necessary setup logic:</p>\\n<h4 id=\\\"integrationsetuptestsjs\\\"><a href=\\\"#integrationsetuptestsjs\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a><code>integration/setupTests.js</code></h4>\\n<pre><code class=\\\"language-js\\\">const { toMatchImageSnapshot } = require('jest-image-snapshot');\\n\\nexpect.extend({ toMatchImageSnapshot });\\n</code></pre>\\n<p>Finally, we’ll create some npm scripts for us to kick everything off with <a href=\\\"https://github.com/bahmutov/start-server-and-test\\\">start-server-and-test</a>:</p>\\n<h4 id=\\\"packagejson\\\"><a href=\\\"#packagejson\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a><code>package.json</code></h4>\\n<pre><code class=\\\"language-json\\\">{\\n  \\\"name\\\": \\\"my-app\\\",\\n  \\\"scripts\\\": {\\n    \\\"jest:integration\\\": \\\"jest -c integration/jest.config.js\\\",\\n    \\\"test:integration\\\": \\\"start-server-and-test storybook http-get://localhost:9009 jest:integration\\\",\\n    \\\"storybook\\\": \\\"start-storybook -p 9009 -s public\\\"\\n  }\\n}\\n</code></pre>\\n<p>Now we’re ready to write our first visual snapshot test!</p>\\n<h4 id=\\\"integrationbuttontestjs\\\"><a href=\\\"#integrationbuttontestjs\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a><code>integration/Button.test.js</code></h4>\\n<pre><code class=\\\"language-js\\\">describe('Button', () => {\\n  it('visually looks correct', async () => {\\n    // APIs from jest-puppeteer\\n    await page.goto('http://localhost:9009/iframe.html?selectedKind=Button&#x26;selectedStory=with+text');\\n    const image = await page.screenshot();\\n\\n    // API from jest-image-snapshot\\n    expect(image).toMatchImageSnapshot();\\n  });\\n});\\n</code></pre>\\n<p>Go ahead and run it:</p>\\n<pre><code class=\\\"language-bash\\\">npm run test:integration\\n</code></pre>\\n<pre><code>info Storybook started on => http://localhost:9009/\\n\\n PASS  integration/app.test.js\\n  Button\\n    ✓ visually looks correct (699ms)\\n\\n › 1 snapshot written.\\nSnapshot Summary\\n › 1 snapshot written from 1 test suite.\\n\\nTest Suites: 1 passed, 1 total\\nTests:       1 passed, 1 total\\nSnapshots:   1 written, 1 total\\nTime:        1.528s, estimated 2s\\nRan all test suites.\\n</code></pre>\\n<p>The first time we run a test it will create a new image snapshot to use as the baseline for subsequent test runs. Try changing the style of your story’s component and running it again. You should get something like this:</p>\\n<pre><code> FAIL  integration/app.test.js\\n  Button\\n    ✕ visually looks correct (880ms)\\n\\n  ● Button › visually looks correct\\n\\n    Expected image to match or be a close match to snapshot but was 0.03625% different from snapshot (174 differing pixels).\\n    See diff for details: /my-app/integration/__image_snapshots__/__diff_output__/app-test-js-button-visually-looks-correct-1-diff.png\\n</code></pre>\\n<p>If this should become the new baseline, we can tell Jest to update them:</p>\\n<pre><code>npm run jest:integration -- -updateSnapshot\\n</code></pre>\\n<p>We’re all set, but keep in mind the <a href=\\\"#challenges\\\">challenges</a> of doing 1:1 pixel matching!</p>\",\"fields\":{\"slug\":\"/testing/automated-visual-testing/\"},\"frontmatter\":{\"title\":\"Automated Visual Testing\",\"id\":\"automated-visual-testing\"}}},\"pathContext\":{\"slug\":\"/testing/automated-visual-testing/\"}}\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// path---testing-automated-visual-testing-f9acabfb19c107e3f8bc.js","module.exports = {\"data\":{\"site\":{\"siteMetadata\":{\"docSections\":{\"basics\":[\"/basics/introduction/\",\"/basics/writing-stories/\",\"/basics/exporting-storybook/\",\"/basics/faq/\",\"/basics/live-examples/\"],\"guides\":[\"/guides/quick-start-guide/\",\"/guides/slow-start-guide/\",\"/guides/guide-html/\",\"/guides/guide-react/\",\"/guides/guide-react-native/\",\"/guides/guide-vue/\",\"/guides/guide-angular/\",\"/guides/guide-mithril/\",\"/guides/guide-marko/\",\"/guides/guide-ember/\",\"/guides/guide-riot/\",\"/guides/guide-svelte/\",\"/guides/guide-preact/\"],\"configurations\":[\"/configurations/overview/\",\"/configurations/options-parameter/\",\"/configurations/default-config/\",\"/configurations/custom-webpack-config/\",\"/configurations/custom-babel-config/\",\"/configurations/typescript-config/\",\"/configurations/add-custom-head-tags/\",\"/configurations/add-custom-body/\",\"/configurations/serving-static-files/\",\"/configurations/env-vars/\",\"/configurations/theming/\",\"/configurations/cli-options/\",\"/configurations/standalone-options/\"],\"formats\":[\"/formats/component-story-format/\",\"/formats/storiesof-api/\",\"/formats/mdx-syntax/\"],\"testing\":[\"/testing/react-ui-testing/\",\"/testing/structural-testing/\",\"/testing/interaction-testing/\",\"/testing/automated-visual-testing/\",\"/testing/manual-testing/\"],\"addons\":[\"/addons/introduction/\",\"/addons/using-addons/\",\"/addons/writing-addons/\",\"/addons/api/\"],\"presets\":[\"/presets/introduction/\",\"/presets/preset-gallery/\",\"/presets/writing-presets/\"]}}},\"allMarkdownRemark\":{\"edges\":[{\"node\":{\"fields\":{\"slug\":\"/404/\"},\"frontmatter\":{\"title\":\"\",\"id\":null}}},{\"node\":{\"fields\":{\"slug\":\"/basics/community/\"},\"frontmatter\":{\"title\":\"Community\",\"id\":\"community\"}}},{\"node\":{\"fields\":{\"slug\":\"/basics/introduction/\"},\"frontmatter\":{\"title\":\"Introduction\",\"id\":\"introduction\"}}},{\"node\":{\"fields\":{\"slug\":\"/addons/introduction/\"},\"frontmatter\":{\"title\":\"Intro to Addons\",\"id\":\"introduction\"}}},{\"node\":{\"fields\":{\"slug\":\"/addons/using-addons/\"},\"frontmatter\":{\"title\":\"Using Addons\",\"id\":\"using-addons\"}}},{\"node\":{\"fields\":{\"slug\":\"/basics/faq/\"},\"frontmatter\":{\"title\":\"Frequently Asked Questions\",\"id\":\"faq\"}}},{\"node\":{\"fields\":{\"slug\":\"/basics/toolbar-guide/\"},\"frontmatter\":{\"title\":\"Toolbar\",\"id\":\"toolbar-guide\"}}},{\"node\":{\"fields\":{\"slug\":\"/basics/live-examples/\"},\"frontmatter\":{\"title\":\"Live Examples\",\"id\":\"live-examples\"}}},{\"node\":{\"fields\":{\"slug\":\"/basics/exporting-storybook/\"},\"frontmatter\":{\"title\":\"Exporting Storybook as a Static App\",\"id\":\"exporting-storybook\"}}},{\"node\":{\"fields\":{\"slug\":\"/configurations/add-custom-head-tags/\"},\"frontmatter\":{\"title\":\"Add Custom Head Tags\",\"id\":\"add-custom-head-tags\"}}},{\"node\":{\"fields\":{\"slug\":\"/configurations/add-custom-body/\"},\"frontmatter\":{\"title\":\"Add Custom Body\",\"id\":\"add-custom-body\"}}},{\"node\":{\"fields\":{\"slug\":\"/configurations/custom-babel-config/\"},\"frontmatter\":{\"title\":\"Custom Babel Config\",\"id\":\"custom-babel-config\"}}},{\"node\":{\"fields\":{\"slug\":\"/configurations/custom-postcss-config/\"},\"frontmatter\":{\"title\":\"Custom Postcss Config\",\"id\":\"custom-postcss-config\"}}},{\"node\":{\"fields\":{\"slug\":\"/configurations/cli-options/\"},\"frontmatter\":{\"title\":\"CLI Options\",\"id\":\"cli-options\"}}},{\"node\":{\"fields\":{\"slug\":\"/configurations/default-config/\"},\"frontmatter\":{\"title\":\"Default Config\",\"id\":\"default-config\"}}},{\"node\":{\"fields\":{\"slug\":\"/configurations/serving-static-files/\"},\"frontmatter\":{\"title\":\"Serving Static Files\",\"id\":\"serving-static-files\"}}},{\"node\":{\"fields\":{\"slug\":\"/configurations/env-vars/\"},\"frontmatter\":{\"title\":\"Using Environment Variables\",\"id\":\"env-vars\"}}},{\"node\":{\"fields\":{\"slug\":\"/configurations/overview/\"},\"frontmatter\":{\"title\":\"Configuration overview\",\"id\":\"overview\"}}},{\"node\":{\"fields\":{\"slug\":\"/configurations/standalone-options/\"},\"frontmatter\":{\"title\":\"Standalone Options\",\"id\":\"standalone-options\"}}},{\"node\":{\"fields\":{\"slug\":\"/configurations/theming/\"},\"frontmatter\":{\"title\":\"Theming Storybook\",\"id\":\"theming\"}}},{\"node\":{\"fields\":{\"slug\":\"/presets/introduction/\"},\"frontmatter\":{\"title\":\"Intro to Presets\",\"id\":\"introduction\"}}},{\"node\":{\"fields\":{\"slug\":\"/configurations/options-parameter/\"},\"frontmatter\":{\"title\":\"Options Parameter\",\"id\":\"options-parameter\"}}},{\"node\":{\"fields\":{\"slug\":\"/presets/preset-gallery/\"},\"frontmatter\":{\"title\":\"Preset Gallery\",\"id\":\"preset-gallery\"}}},{\"node\":{\"fields\":{\"slug\":\"/presets/writing-presets/\"},\"frontmatter\":{\"title\":\"Writing Presets\",\"id\":\"writing-presets\"}}},{\"node\":{\"fields\":{\"slug\":\"/formats/mdx-syntax/\"},\"frontmatter\":{\"title\":\"MDX Syntax\",\"id\":\"mdx-syntax\"}}},{\"node\":{\"fields\":{\"slug\":\"/formats/component-story-format/\"},\"frontmatter\":{\"title\":\"Component Story Format (CSF)\",\"id\":\"component-story-format\"}}},{\"node\":{\"fields\":{\"slug\":\"/guides/guide-ember/\"},\"frontmatter\":{\"title\":\"Storybook for Ember\",\"id\":\"guide-ember\"}}},{\"node\":{\"fields\":{\"slug\":\"/guides/guide-angular/\"},\"frontmatter\":{\"title\":\"Storybook for Angular\",\"id\":\"guide-angular\"}}},{\"node\":{\"fields\":{\"slug\":\"/guides/guide-html/\"},\"frontmatter\":{\"title\":\"Storybook for HTML\",\"id\":\"guide-html\"}}},{\"node\":{\"fields\":{\"slug\":\"/guides/guide-mithril/\"},\"frontmatter\":{\"title\":\"Storybook for Mithril\",\"id\":\"guide-mithril\"}}},{\"node\":{\"fields\":{\"slug\":\"/formats/storiesof-api/\"},\"frontmatter\":{\"title\":\"StoriesOf API\",\"id\":\"storiesof-api\"}}},{\"node\":{\"fields\":{\"slug\":\"/guides/guide-rax/\"},\"frontmatter\":{\"title\":\"Storybook for Rax\",\"id\":\"guide-rax\"}}},{\"node\":{\"fields\":{\"slug\":\"/guides/guide-marko/\"},\"frontmatter\":{\"title\":\"Storybook for Marko\",\"id\":\"guide-marko\"}}},{\"node\":{\"fields\":{\"slug\":\"/guides/guide-preact/\"},\"frontmatter\":{\"title\":\"Storybook for Preact\",\"id\":\"guide-preact\"}}},{\"node\":{\"fields\":{\"slug\":\"/guides/guide-react/\"},\"frontmatter\":{\"title\":\"Storybook for React\",\"id\":\"guide-react\"}}},{\"node\":{\"fields\":{\"slug\":\"/guides/guide-svelte/\"},\"frontmatter\":{\"title\":\"Storybook for Svelte\",\"id\":\"guide-svelte\"}}},{\"node\":{\"fields\":{\"slug\":\"/guides/guide-react-native/\"},\"frontmatter\":{\"title\":\"Storybook for React Native\",\"id\":\"guide-react-native\"}}},{\"node\":{\"fields\":{\"slug\":\"/guides/guide-riot/\"},\"frontmatter\":{\"title\":\"Storybook for Riot\",\"id\":\"guide-riot\"}}},{\"node\":{\"fields\":{\"slug\":\"/guides/guide-vue/\"},\"frontmatter\":{\"title\":\"Storybook for Vue\",\"id\":\"guide-vue\"}}},{\"node\":{\"fields\":{\"slug\":\"/guides/quick-start-guide/\"},\"frontmatter\":{\"title\":\"Quick Start Guide\",\"id\":\"quick-start-guide\"}}},{\"node\":{\"fields\":{\"slug\":\"/guides/slow-start-guide/\"},\"frontmatter\":{\"title\":\"Slow Start Guide\",\"id\":\"slow-start-guide\"}}},{\"node\":{\"fields\":{\"slug\":\"/testing/react-ui-testing/\"},\"frontmatter\":{\"title\":\"Introduction: React UI Testing\",\"id\":\"react-ui-testing\"}}},{\"node\":{\"fields\":{\"slug\":\"/testing/interaction-testing/\"},\"frontmatter\":{\"title\":\"Interaction Testing\",\"id\":\"interaction-testing\"}}},{\"node\":{\"fields\":{\"slug\":\"/testing/structural-testing/\"},\"frontmatter\":{\"title\":\"Structural Testing\",\"id\":\"structural-testing\"}}},{\"node\":{\"fields\":{\"slug\":\"/testing/manual-testing/\"},\"frontmatter\":{\"title\":\"Manual Testing\",\"id\":\"manual-testing\"}}},{\"node\":{\"fields\":{\"slug\":\"/addons/api/\"},\"frontmatter\":{\"title\":\"API\",\"id\":\"api\"}}},{\"node\":{\"fields\":{\"slug\":\"/addons/addon-gallery/\"},\"frontmatter\":{\"title\":\"Addon Gallery\",\"id\":\"addon-gallery\"}}},{\"node\":{\"fields\":{\"slug\":\"/addons/writing-addons/\"},\"frontmatter\":{\"title\":\"Writing Addons\",\"id\":\"writing-addons\"}}},{\"node\":{\"fields\":{\"slug\":\"/basics/writing-stories/\"},\"frontmatter\":{\"title\":\"Writing Stories\",\"id\":\"writing-stories\"}}},{\"node\":{\"fields\":{\"slug\":\"/configurations/custom-webpack-config/\"},\"frontmatter\":{\"title\":\"Custom Webpack Config\",\"id\":\"custom-webpack-config\"}}},{\"node\":{\"fields\":{\"slug\":\"/configurations/typescript-config/\"},\"frontmatter\":{\"title\":\"TypeScript Config\",\"id\":\"typescript-config\"}}},{\"node\":{\"fields\":{\"slug\":\"/testing/automated-visual-testing/\"},\"frontmatter\":{\"title\":\"Automated Visual Testing\",\"id\":\"automated-visual-testing\"}}}]},\"markdownRemark\":{\"html\":\"<p>Automated Visual Testing is a quality assurance process meant to automatically verify that a UI visually appears as intended. There are many alternative names for this process, such as Visual Regression Testing, Visual Validation Testing, Visual UI Testing, or Visual Testing, but in all cases we’re talking about confirming the thing your users will see—the actual pixels—without caring about how it’s generated.</p>\\n<h2 id=\\\"benefits\\\"><a href=\\\"#benefits\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>Benefits</h2>\\n<p>The largest benefit to Automated Visual Testing is that they can often supersede other, more brittle tests. Instead of asserting specific CSS rules, selectors, and HTML markup, you assert that something visually appears as expected. If you refactor style, markup, or state logic, but visually nothing changes, you wouldn’t need to modify any tests or update visual baselines! In a majority of cases, what a user <em>sees</em> is what you really care about, not how it was achieved.</p>\\n<p>Another potential benefit is with cross-browser testing. If you perform your visual tests against multiple browsers, they can potentially catch regressions a developer didn’t because it appeared correct in their preferred development browser.</p>\\n<h2 id=\\\"challenges\\\"><a href=\\\"#challenges\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>Challenges</h2>\\n<p>The biggest challenge with Automated Visual Testing is that humans and machines perceive pixels differently. Two screenshots of a UI could appear entirely identical to a human but 100% different to a 1:1, naive diffing algorithm.</p>\\n<p>For example, changes in <a href=\\\"https://en.wikipedia.org/wiki/Spatial_anti-aliasing\\\">anti-aliasing</a> are common, even if human eyes don’t notice them.</p>\\n<p>\\n  <a\\n    class=\\\"gatsby-resp-image-link\\\"\\n    href=\\\"/static/image-diff-1-4684ffd6fa1c7419af7aa1c570722fb2-6fae4.png\\\"\\n    style=\\\"display: block\\\"\\n    target=\\\"_blank\\\"\\n    rel=\\\"noopener\\\"\\n  >\\n  \\n  <span\\n    class=\\\"gatsby-resp-image-wrapper\\\"\\n    style=\\\"position: relative; display: block; ; max-width: 690px; margin-left: auto; margin-right: auto;\\\"\\n  >\\n    <span\\n      class=\\\"gatsby-resp-image-background-image\\\"\\n      style=\\\"padding-bottom: 11.249999999999998%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAACCAIAAADXZGvcAAAACXBIWXMAAAsSAAALEgHS3X78AAAAa0lEQVQI12O4cPna5u27Zi5d07l4y8r1mzbv2H3/4aN9h45u3r5z2pqdM1Zv37Jtx66DR76+evPhxp2312+f2L7vxdWbH67f/vroKcN/MPj7+9ffX9//o4J/v3/9+/0TReTfvy/fvwFJCBcAX6BpqkkgvCYAAAAASUVORK5CYII='); background-size: cover; display: block;\\\"\\n    >\\n      <img\\n        class=\\\"gatsby-resp-image-image\\\"\\n        style=\\\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\\\"\\n        alt=\\\"Menu before and after differences\\\"\\n        title=\\\"\\\"\\n        src=\\\"/static/image-diff-1-4684ffd6fa1c7419af7aa1c570722fb2-44d6a.png\\\"\\n        srcset=\\\"/static/image-diff-1-4684ffd6fa1c7419af7aa1c570722fb2-f4799.png 173w,\\n/static/image-diff-1-4684ffd6fa1c7419af7aa1c570722fb2-b3b1d.png 345w,\\n/static/image-diff-1-4684ffd6fa1c7419af7aa1c570722fb2-44d6a.png 690w,\\n/static/image-diff-1-4684ffd6fa1c7419af7aa1c570722fb2-bc0f7.png 1035w,\\n/static/image-diff-1-4684ffd6fa1c7419af7aa1c570722fb2-b50e5.png 1380w,\\n/static/image-diff-1-4684ffd6fa1c7419af7aa1c570722fb2-6fae4.png 2000w\\\"\\n        sizes=\\\"(max-width: 690px) 100vw, 690px\\\"\\n      />\\n    </span>\\n  </span>\\n  \\n  </a>\\n    \\n\\n  <a\\n    class=\\\"gatsby-resp-image-link\\\"\\n    href=\\\"/static/image-diff-2-4aeae5c5035e9380b6ac4383a314fac5-6fae4.png\\\"\\n    style=\\\"display: block\\\"\\n    target=\\\"_blank\\\"\\n    rel=\\\"noopener\\\"\\n  >\\n  \\n  <span\\n    class=\\\"gatsby-resp-image-wrapper\\\"\\n    style=\\\"position: relative; display: block; ; max-width: 690px; margin-left: auto; margin-right: auto;\\\"\\n  >\\n    <span\\n      class=\\\"gatsby-resp-image-background-image\\\"\\n      style=\\\"padding-bottom: 25.650000000000002%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAIAAADKYVtkAAAACXBIWXMAAAsSAAALEgHS3X78AAABPElEQVQY0wExAc7+AK/X8IrE6ZHH6o7G6pLI64rE6bTZ8ZnM7I7G6o7G6pDH6o/H6pPI6+P3/Ov+/+n6/un+/+r9/+j8//D7/wCSyetXq+BdruFjsuNXq+FZrOKPx+tzuuZTqt9ms+NYreBYquBouenWwdPdqrzbssTbmK3bpbjarcDn1eAAns/tc7nmgMDoe73ndLnmcLjll8zsgcHpdr3mgcLpcrnkcrjkecTu16/C4ZCj34qg3n6U34Wa3Iac573LAIbC6VCn31ms4Vqu5F6v40+m34zF6may41Wq4Far4Vyu41er4F2u4dTq9+Dw+93r993t+d7t+Nzq9ufx+QDt9vrq9//I1NyyvsbY5Ozn9Pzt9vvo9Prn9PzDz9fE0Nno9Pzn8vr5/P77/v/4+/zMz9H09/n7///7/v99UupMEkmVQQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\\\"\\n    >\\n      <img\\n        class=\\\"gatsby-resp-image-image\\\"\\n        style=\\\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\\\"\\n        alt=\\\"Close-up of menu before and after differences\\\"\\n        title=\\\"\\\"\\n        src=\\\"/static/image-diff-2-4aeae5c5035e9380b6ac4383a314fac5-44d6a.png\\\"\\n        srcset=\\\"/static/image-diff-2-4aeae5c5035e9380b6ac4383a314fac5-f4799.png 173w,\\n/static/image-diff-2-4aeae5c5035e9380b6ac4383a314fac5-b3b1d.png 345w,\\n/static/image-diff-2-4aeae5c5035e9380b6ac4383a314fac5-44d6a.png 690w,\\n/static/image-diff-2-4aeae5c5035e9380b6ac4383a314fac5-bc0f7.png 1035w,\\n/static/image-diff-2-4aeae5c5035e9380b6ac4383a314fac5-b50e5.png 1380w,\\n/static/image-diff-2-4aeae5c5035e9380b6ac4383a314fac5-6fae4.png 2000w\\\"\\n        sizes=\\\"(max-width: 690px) 100vw, 690px\\\"\\n      />\\n    </span>\\n  </span>\\n  \\n  </a>\\n    </p>\\n<p>Even though we didn’t change any CSS and the menus appear visually the same to our eyes, if we compare their pixels 1:1 we find that lots of it has changed! This can happen between browser versions, underlying hardware changes on your cloud platform, and more.</p>\\n<p>Similar situations happen all the time, such as how images, drop shadows, etc are rendered.</p>\\n<p>Some more robust libraries and services solve this by using a combination of <a href=\\\"https://wikipedia.org/wiki/Machine_learning\\\">Machine Learning</a> and <a href=\\\"https://wikipedia.org/wiki/Heuristic_(computer_science)\\\">heuristics</a>. The machine is trained what is and is not an acceptable variation.</p>\\n<p>For example, every graphics card renders text and images differently at the pixel level. Your machine will likely have a different graphics card than the testing server and the other developers. While the naked eye can’t tell the difference, a machine needs to be trained to “see” them like we do.</p>\\n<p>Another issue is that these tests are often slow compared to more lightweight unit tests that don’t require a full browser. So you might only run them when you commit, push, and/or on your Continuous Integration (CI) server.</p>\\n<h2 id=\\\"libraries-and-services-with-storybook-integration\\\"><a href=\\\"#libraries-and-services-with-storybook-integration\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>Libraries and Services with Storybook Integration</h2>\\n<p>There are many libraries and services that have Storybook integrations out-of-box, with varying levels of sophistication. Some even use complex Machine Learning instead of 1:1 pixel comparison.</p>\\n<p>Storybook uses <a href=\\\"https://www.chromaticqa.com\\\">Chromatic</a>, a visual testing service made by Storybook maintainers, to prevent UI bugs in our <a href=\\\"https://www.chromaticqa.com/library?appId=5a375b97f4b14f0020b0cda3\\\">application</a>, <a href=\\\"https://www.chromaticqa.com/library?appId=5ccbc373887ca40020446347\\\">design system</a>, and <a href=\\\"https://www.chromaticqa.com/library?appId=5be26744d2f6250024a9117d\\\">website</a>.</p>\\n<p>Here are some in alphabetical order:</p>\\n<ul>\\n<li><a href=\\\"https://applitools.com/storybook\\\">Applitools</a></li>\\n<li><a href=\\\"https://www.chromaticqa.com\\\">Chromatic</a> made by Storybook maintainers</li>\\n<li><a href=\\\"https://github.com/wKich/creevey\\\">Creevey</a></li>\\n<li><a href=\\\"https://happo.io\\\">Happo</a></li>\\n<li><a href=\\\"https://loki.js.org/\\\">Loki</a></li>\\n<li><a href=\\\"https://docs.percy.io/docs/storybook\\\">Percy</a></li>\\n<li><a href=\\\"https://screener.io/v2/docs\\\">Screener</a></li>\\n<li><a href=\\\"https://github.com/storybookjs/storybook/tree/master/addons/storyshots\\\">StoryShots</a> with its <a href=\\\"https://github.com/storybookjs/storybook/tree/master/addons/storyshots#configure-storyshots-for-image-snapshots\\\">seamless integration</a> with <a href=\\\"https://github.com/americanexpress/jest-image-snapshot\\\">jest-image-snapshot</a></li>\\n<li><a href=\\\"https://github.com/Visual-Regression-Tracker/Visual-Regression-Tracker/wiki/Storybook\\\">Visual Regression Tracker</a></li>\\n</ul>\\n<h2 id=\\\"custom-solutions\\\"><a href=\\\"#custom-solutions\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>Custom Solutions</h2>\\n<p>There are a number of popular libraries that don’t offer out-of-box integration with Storybook, but still can be used to visual test it. <a href=\\\"https://github.com/garris/BackstopJS\\\">BackstopJS</a> and <a href=\\\"https://github.com/gemini-testing/gemini\\\">Gemini</a>, for example, but there are quite a few!</p>\\n<p>Storybook’s web server supports the ability to render a component story standalone, in any particular state, without any of the Storybook layout elements. With these special URLs you can either create your own screenshots and diff them, or use a library which does that work for you.</p>\\n<p>Let’s take a look at an example, in this case using <a href=\\\"https://github.com/americanexpress/jest-image-snapshot\\\">jest-image-snapshot</a>—but the idea is similar for most of them.</p>\\n<blockquote>\\n<p>Most custom solutions, including jest-image-snapshot, do 1:1 pixel comparisons which may suffer from issues described in the <strong>Challenges</strong> section above.</p>\\n</blockquote>\\n<h3 id=\\\"example-using-puppeteer-and-jest\\\"><a href=\\\"#example-using-puppeteer-and-jest\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>Example using Puppeteer and Jest</h3>\\n<p>Here’s a sample Storybook we’d like to visually test:</p>\\n<p>\\n  <a\\n    class=\\\"gatsby-resp-image-link\\\"\\n    href=\\\"/static/storybook-screenshot-195bd35a34abbeda16ec0ced7ec653fb-1d34c.png\\\"\\n    style=\\\"display: block\\\"\\n    target=\\\"_blank\\\"\\n    rel=\\\"noopener\\\"\\n  >\\n  \\n  <span\\n    class=\\\"gatsby-resp-image-wrapper\\\"\\n    style=\\\"position: relative; display: block; ; max-width: 690px; margin-left: auto; margin-right: auto;\\\"\\n  >\\n    <span\\n      class=\\\"gatsby-resp-image-background-image\\\"\\n      style=\\\"padding-bottom: 62.447960033305584%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsSAAALEgHS3X78AAABqUlEQVQoz5WRy07CUBCGu3CnaIPxlrgwrttEFibwBqJRCUtW+gSGhSxaLiUEw4ZHIAEC7HgqSFgQgi2F3s7pOOdQQMGYepKvTMqZL/90hMu9qHh9Fc3Fb2/V++SDEk8klJtYTDk9v1Aih6JyEIL9yJF6fHKWwx5ReH58krLZN/ioVqFer0OtVuOo+TwoigqFQnFNvlBY1sWf70olDd5zObhLJmWh2+tJczyLxYLMZjPXsiyXUsp/CfFcAAgDQeY9dAntdlsaj8cOCsDzPN9xHA5e4IQ5eA+wx+50OrKAD2kwGDi6rgNKfQwLtm0zU1hWQocL+/2+NBwOndFoBCjzcXT2J7sDwd0/z46w1WpJ+O0clmpbuJL+K+FK6LouH5kJmZyDYkIpEEKWBDV+6+9wIfZuhIZh8IQoo4jPxOYnptV135sZvmfbPq49qC2f8lUETzxMiP3LpbAtm6bJE+I7arNm111vGSj9vd7AhZjU7na7stBoNKTJZELYqDg6h9VbYwXsjAssCAs5nU69ZrMpC6lUSqxUKhlN016Rl1CUy+u6vKxZbyadTotfTdkC8j6EogQAAAAASUVORK5CYII='); background-size: cover; display: block;\\\"\\n    >\\n      <img\\n        class=\\\"gatsby-resp-image-image\\\"\\n        style=\\\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\\\"\\n        alt=\\\"Storybook Screenshot\\\"\\n        title=\\\"\\\"\\n        src=\\\"/static/storybook-screenshot-195bd35a34abbeda16ec0ced7ec653fb-44d6a.png\\\"\\n        srcset=\\\"/static/storybook-screenshot-195bd35a34abbeda16ec0ced7ec653fb-f4799.png 173w,\\n/static/storybook-screenshot-195bd35a34abbeda16ec0ced7ec653fb-b3b1d.png 345w,\\n/static/storybook-screenshot-195bd35a34abbeda16ec0ced7ec653fb-44d6a.png 690w,\\n/static/storybook-screenshot-195bd35a34abbeda16ec0ced7ec653fb-bc0f7.png 1035w,\\n/static/storybook-screenshot-195bd35a34abbeda16ec0ced7ec653fb-b50e5.png 1380w,\\n/static/storybook-screenshot-195bd35a34abbeda16ec0ced7ec653fb-0ed32.png 2070w,\\n/static/storybook-screenshot-195bd35a34abbeda16ec0ced7ec653fb-1d34c.png 2402w\\\"\\n        sizes=\\\"(max-width: 690px) 100vw, 690px\\\"\\n      />\\n    </span>\\n  </span>\\n  \\n  </a>\\n    </p>\\n<p>The Storybook UI has a bunch of elements you wouldn’t want to include in your visual test. Besides being extraneous, your tests could incorrectly fail when you add a new, unrelated story or state because it would show up in the side menu.</p>\\n<p>Instead, we’ll want to render a component’s story by itself. Let’s assume the above Storybook runs on port 9009 and we can access it via <a href=\\\"http://localhost:9009/\\\">http://localhost:9009/</a>.</p>\\n<p>Now let’s pick a single story: the “with text” story of the Button.</p>\\n<p>The URL for that story contains a number of query parameters, but the first two are the most important: <a href=\\\"http://localhost:9009/?selectedKind=Button&#x26;selectedStory=with+text\\\">http://localhost:9009/?selectedKind=Button&#x26;selectedStory=with+text</a></p>\\n<ul>\\n<li>selectedKind=Button</li>\\n<li>selectedStory=with+text</li>\\n</ul>\\n<p>Using these two parameters we can generate the URL to render the story by itself. Instead of the URL’s path being the homepage/index we use <code>/iframe.html</code>:</p>\\n<p><a href=\\\"http://localhost:9009/iframe.html?selectedKind=Button&#x26;selectedStory=with+text\\\">http://localhost:9009/iframe.html?selectedKind=Button&#x26;selectedStory=with+text</a></p>\\n<p>\\n  <a\\n    class=\\\"gatsby-resp-image-link\\\"\\n    href=\\\"/static/storybook-iframe-screenshot-99ff80ac2a815448d16e87127887e1e7-1d34c.png\\\"\\n    style=\\\"display: block\\\"\\n    target=\\\"_blank\\\"\\n    rel=\\\"noopener\\\"\\n  >\\n  \\n  <span\\n    class=\\\"gatsby-resp-image-wrapper\\\"\\n    style=\\\"position: relative; display: block; ; max-width: 690px; margin-left: auto; margin-right: auto;\\\"\\n  >\\n    <span\\n      class=\\\"gatsby-resp-image-background-image\\\"\\n      style=\\\"padding-bottom: 62.447960033305584%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsSAAALEgHS3X78AAABKElEQVQoz82RvU6DUBTHGZwUK6kSHByMM0QdGnkDbQc1ISxO9g3sUptLA7WhkhAWXoEQPl+PjxZoj1xUxDjB5El+w/3fnF/OvYc42+tTF+f9KT8YSHe3Q3TD8+jy6hqd0Aw6IHuI7FGIPDyqwdn+X6RjmpnSzClFPN4/sJPJC7yvVmCaJhiGAbquw9tyCbKsgKIsQFaULxYgzecgST8gJFX562wGw9GII8IwZJMkidM0LQAg6wjujbGLcByHLYpiUwaw61i4N8uyte/7XCUsD00htORbuPE871OY53kthJbVFNYT/n9h4w+3HXay/bUU13XrLZeFL3ctqYSlYx0EAUdYlsXGcVzgycundwL3RlGU27bNEYIgUJqmPamqOi557sgYO0RRpD4ANtUKtCUb1X8AAAAASUVORK5CYII='); background-size: cover; display: block;\\\"\\n    >\\n      <img\\n        class=\\\"gatsby-resp-image-image\\\"\\n        style=\\\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\\\"\\n        alt=\\\"Storybook iframe Screenshot\\\"\\n        title=\\\"\\\"\\n        src=\\\"/static/storybook-iframe-screenshot-99ff80ac2a815448d16e87127887e1e7-44d6a.png\\\"\\n        srcset=\\\"/static/storybook-iframe-screenshot-99ff80ac2a815448d16e87127887e1e7-f4799.png 173w,\\n/static/storybook-iframe-screenshot-99ff80ac2a815448d16e87127887e1e7-b3b1d.png 345w,\\n/static/storybook-iframe-screenshot-99ff80ac2a815448d16e87127887e1e7-44d6a.png 690w,\\n/static/storybook-iframe-screenshot-99ff80ac2a815448d16e87127887e1e7-bc0f7.png 1035w,\\n/static/storybook-iframe-screenshot-99ff80ac2a815448d16e87127887e1e7-b50e5.png 1380w,\\n/static/storybook-iframe-screenshot-99ff80ac2a815448d16e87127887e1e7-0ed32.png 2070w,\\n/static/storybook-iframe-screenshot-99ff80ac2a815448d16e87127887e1e7-1d34c.png 2402w\\\"\\n        sizes=\\\"(max-width: 690px) 100vw, 690px\\\"\\n      />\\n    </span>\\n  </span>\\n  \\n  </a>\\n    </p>\\n<p>Now that we know how to render the story by itself, let’s get our testing environment all set up.</p>\\n<p>For this example, we’re going to use a number of packages:</p>\\n<ul>\\n<li>\\n<p><a href=\\\"https://jestjs.io/\\\">jest</a></p>\\n<ul>\\n<li>Testing framework by Facebook</li>\\n</ul>\\n</li>\\n<li>\\n<p><a href=\\\"https://developers.google.com/web/tools/puppeteer/\\\">puppeteer</a></p>\\n<ul>\\n<li>Library by Google for controlling a <a href=\\\"https://wikipedia.org/wiki/Headless_software\\\">headless</a> Chrome browser.</li>\\n</ul>\\n</li>\\n<li>\\n<p><a href=\\\"https://github.com/smooth-code/jest-puppeteer\\\">jest-puppeteer</a></p>\\n<ul>\\n<li>Integration between Jest and Puppeteer</li>\\n</ul>\\n</li>\\n<li>\\n<p><a href=\\\"https://github.com/americanexpress/jest-image-snapshot\\\">jest-image-snapshot</a></p>\\n<ul>\\n<li>Image snapshot assertion helper</li>\\n</ul>\\n</li>\\n<li>\\n<p><a href=\\\"https://github.com/bahmutov/start-server-and-test\\\">start-server-and-test</a></p>\\n<ul>\\n<li>Used to start/stop our Storybook server automatically for our tests</li>\\n</ul>\\n</li>\\n</ul>\\n<blockquote>\\n<p>Even though we’re choosing Jest/Puppeteer in this example, the principles are the same with other solutions.</p>\\n</blockquote>\\n<p>Let’s go ahead and add all of these:</p>\\n<pre><code class=\\\"language-sh\\\">yarn add jest puppeteer jest-puppeteer jest-image-snapshot start-server-and-test --dev\\n</code></pre>\\n<p>There’s a bit of setup code that needs to run before your tests, so we’ll need to configure a Jest setup file to run first, if you haven’t already. This is done with the <a href=\\\"https://jestjs.io/docs/en/configuration.html#setupFilesAfterEnv-string\\\"><code>setupFilesAfterEnv</code> config property</a>, either in your package.json or in your <code>jest.config.js</code>. We’ll also set <code>\\\"preset\\\": \\\"jest-puppeteer\\\"</code> so that we get the nice integration from jest-puppeteer.</p>\\n<h4 id=\\\"integrationjestconfigjs\\\"><a href=\\\"#integrationjestconfigjs\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a><code>integration/jest.config.js</code></h4>\\n<pre><code class=\\\"language-js\\\">module.exports = {\\n  preset: 'jest-puppeteer',\\n  testRegex: './*\\\\\\\\.test\\\\\\\\.js$',\\n  setupFilesAfterEnv: ['./setupTests.js']\\n};\\n</code></pre>\\n<p>With our configuration in place, we can create our file at <code>integration/setupTests.js</code> and add the necessary setup logic:</p>\\n<h4 id=\\\"integrationsetuptestsjs\\\"><a href=\\\"#integrationsetuptestsjs\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a><code>integration/setupTests.js</code></h4>\\n<pre><code class=\\\"language-js\\\">const { toMatchImageSnapshot } = require('jest-image-snapshot');\\n\\nexpect.extend({ toMatchImageSnapshot });\\n</code></pre>\\n<p>Finally, we’ll create some npm scripts for us to kick everything off with <a href=\\\"https://github.com/bahmutov/start-server-and-test\\\">start-server-and-test</a>:</p>\\n<h4 id=\\\"packagejson\\\"><a href=\\\"#packagejson\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a><code>package.json</code></h4>\\n<pre><code class=\\\"language-json\\\">{\\n  \\\"name\\\": \\\"my-app\\\",\\n  \\\"scripts\\\": {\\n    \\\"jest:integration\\\": \\\"jest -c integration/jest.config.js\\\",\\n    \\\"test:integration\\\": \\\"start-server-and-test storybook http-get://localhost:9009 jest:integration\\\",\\n    \\\"storybook\\\": \\\"start-storybook -p 9009 -s public\\\"\\n  }\\n}\\n</code></pre>\\n<p>Now we’re ready to write our first visual snapshot test!</p>\\n<h4 id=\\\"integrationbuttontestjs\\\"><a href=\\\"#integrationbuttontestjs\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a><code>integration/Button.test.js</code></h4>\\n<pre><code class=\\\"language-js\\\">describe('Button', () => {\\n  it('visually looks correct', async () => {\\n    // APIs from jest-puppeteer\\n    await page.goto('http://localhost:9009/iframe.html?selectedKind=Button&#x26;selectedStory=with+text');\\n    const image = await page.screenshot();\\n\\n    // API from jest-image-snapshot\\n    expect(image).toMatchImageSnapshot();\\n  });\\n});\\n</code></pre>\\n<p>Go ahead and run it:</p>\\n<pre><code class=\\\"language-bash\\\">npm run test:integration\\n</code></pre>\\n<pre><code>info Storybook started on => http://localhost:9009/\\n\\n PASS  integration/app.test.js\\n  Button\\n    ✓ visually looks correct (699ms)\\n\\n › 1 snapshot written.\\nSnapshot Summary\\n › 1 snapshot written from 1 test suite.\\n\\nTest Suites: 1 passed, 1 total\\nTests:       1 passed, 1 total\\nSnapshots:   1 written, 1 total\\nTime:        1.528s, estimated 2s\\nRan all test suites.\\n</code></pre>\\n<p>The first time we run a test it will create a new image snapshot to use as the baseline for subsequent test runs. Try changing the style of your story’s component and running it again. You should get something like this:</p>\\n<pre><code> FAIL  integration/app.test.js\\n  Button\\n    ✕ visually looks correct (880ms)\\n\\n  ● Button › visually looks correct\\n\\n    Expected image to match or be a close match to snapshot but was 0.03625% different from snapshot (174 differing pixels).\\n    See diff for details: /my-app/integration/__image_snapshots__/__diff_output__/app-test-js-button-visually-looks-correct-1-diff.png\\n</code></pre>\\n<p>If this should become the new baseline, we can tell Jest to update them:</p>\\n<pre><code>npm run jest:integration -- -updateSnapshot\\n</code></pre>\\n<p>We’re all set, but keep in mind the <a href=\\\"#challenges\\\">challenges</a> of doing 1:1 pixel matching!</p>\",\"fields\":{\"slug\":\"/testing/automated-visual-testing/\"},\"frontmatter\":{\"title\":\"Automated Visual Testing\",\"id\":\"automated-visual-testing\"}}},\"pathContext\":{\"slug\":\"/testing/automated-visual-testing/\"}}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/json-loader!./.cache/json/testing-automated-visual-testing.json\n// module id = 959\n// module chunks = 36869246150532"],"sourceRoot":""}